env:
  global:
  - REPO=p1hub/p1pay.api.protocol.one
  - secure: hNv/KkYGWp8wfRiiSBkS154XBgfZzzTB1Oquld9A0zI44+G7L4eZRaZGNmWtRxXTMPqJHRuhzUFlgGTVq7XsFXEV0BlHMV7av2SSuT98LUVJV+djLTLHsld2ps3k7ZRm+8zeTR1lqDPffp7Ugxf+zJ5e/o07QCb9/0Ofu02XxLIysOaZ5kWBdgldfqoC+aOfA4ztbTWfByg2IKKnpaA45gJV0Al36X6gYldHXUeoWG2iEg0vzxFfu7B9TZQvprNtrWhS0n9Z0TTuWrVfqFHsM5e1Z9qX+qlTmLlDweM8S3+cmRABR0HdkafZLtV+JG4YDSCFxLtNHewmi6YOzQ8kYW2J000amvCnA+GHEtcGSGxQp2GbXLvtuT0NrXJNcW2jPZyL7Zz0jlD5eqxN07k+8M0SXhtdXhkO/rX/HWHAEUPjNUnaPJQhOW9nn9bAW6h0JdIE/q7LIukSocRwdt/K+ReQ8Jcp6rpd56WttlWtduKANVU72MofzCg9QyThUgtlWFfdUf70lXgetEQ91pRDK22orz+muki8xx+4Y28EVWjfmrHty0YRS2g71j0s91+xMc3Sw+EYydmSeI2gB5R1vHm31JL6G50aR16vmRhiTnOsT75o4lJ422pKuU207+M7lIynmQTmf8UngTzObLTqIGrJnWPXuzcKdSMc9kBoxA8=
  - secure: hGAYqR07fCJupHwq9x3e6JpZO2DqDBsb1Ytm6mGBFIKOGEnNkUcxnoWcN41ZTGWFrR0QzAzaZZEY/oQ8edVgWy/RH1NaeHGQAm2klZx610G3KaGe5Av5XMEhDZULPh3lWConGsKqniohRndu1AMdvfrA0w9WJy9d8wHwwQlbXDwbEkb3G6HHWEHkkf2CUhmxmn9VgBI8hiGGoLB68ZtOBiA/ywaQyOtQUU5KSbvSSr2aJUlenqpxqUNAvD4yW53wENuriVqHgLgbU8gvu7uqD6oipmCyUY30qpvk/KgHZjuJWW+IdqbgJ2WHdpkceWT8IkSt5j3QNk8+kXRXKpPxNvz8A4z/3oqvlei2XcqEebyCF40OgEKoqdWvjDy9BoxJ/Eiugm3bBq8TBjlOHq/uOrQxZLiHXV+/ue3Jn80PhxGshn/0Gp79pICXePQ2yY9evLK/xparwHDD/oN/h2GR+Dx10/stCafHuGrVEpAOjLCTJxwWYNQzP1LSo+i4s0sssElFSTDPD8h5kUYh1QXYvU7VB5G97MhWwx1+FNKpfvK/StqAS1qnEboO0uQV2Q1HznWDS1Z8hqFougguoeqfx4ognXcxjtg0DDjljc+k6S2Ib6sOlXfBJIpy/ca46eg1g9zbQALiKyamLS7WI9bzpKssbq+RmqEb/pHidgj/x8w=
  - secure: VZXdohgKPY5yQkKaXFL+kNa6XWMqIoz/GQHSPMq1bM145qdPFSMLcFZ1sAjdSjsJ3lUook4DE7JpClo2NGVn3JEZ2jKiiMEPy1OBaYE6YLRC9IrUecT0YBCkZWtkmw5OPl4WAPG30Nn3/qchNKYBH8LvVjBMXJWVW7Gm2FqMPqIL/A4nwNRBXWeBawBDrSdyF4TYobRoRa+7b2Qr2je7bfiumaqWi9GeTBi3975pC8CuixB5/IyLsDZdrYsgUYgK7QHsdK5gpDymreWrJNg37UmtOJMgciHUSjrG/9tHSz9msEcKI61dHRbVNlDhW1G3XI3ypMvZDT6jJbh0FI5G3xXW4MdfuQKdMMpJfmTNFQivEY9wxwD/cKhrqWv8D+1h8rMmCGi9uSawM08WF/dC00GsmkMM328VmnJxiML7o1S3MsUZ8MVRstMggCXTCQ/Y8vl7JPIkjMAtFgOfaYdawRVDYV3CN6UolsSIZsFxmUX7Hhk+SyfRV8uLVPjXB6NDozTh+3ocsRk22UKgJBoOhWQSmFCDXg0OZdtubqpkpVx7QUs6cFQWNCF0jZ/ylAOENmGNI1gZWt5dv8KctahveohtwdPGONVCxyzKWqda3/rsM6RyXbpFQ8SMLUsUQU02vs/0vsnW/behh4yzDCJeI4ZJnUdBQRR2XXf/BYEgOCA=
  - secure: EnRXW1LrwbCmI/lfu5G2sFo2cMcAe35LVxG9Vn6F5fnTBqdkUfZthHwfFfaP8hleEk4bpYmTLPFou3g8eH8KBEwPQbNQSm1hmMsSYdiA6fCU3IsMd6xK107OU5IeQv4FOlNK48MFH1kXSazk++22ffMGpumEcB3cOFrIqwJ3K+QF6msSOhoQRXt7d/HP9oGO+tb7Dx5jb0mjg1TsUYvXpCQtFVFFfttY+Buq34yMrW2DHoAaTomJSDz1CMHGeI9V5dKvZabCGVHY7GRV9nBem0QjuXTR1pmNVPFRJmDaOQGMNgIzFIm9PfvgR8G5mZKI9YHa4nzZH38X/zZhRgZqLovhYIKn+FFeKj/nYvaryosUJ+D7CTSAVuzZ/tikSo+T3cOl27srRXibbuEAD9QR7VlJNpJqN6uJOi25gyx+FQzkIbf6YNB22mHAef8SERcx97mrNPPvJypTetxHH1/oTpTlyafs7u3K3DSP//XSxAFlAgS8uQWFm/WbRFKMFSGddpLuZYV31DWxZIa2Y3M820q4dg1lzYrX6baLpjROymyd7u1ZjJF8xI9yhTktzgDgwezWksNGvxj6NAUuxXN3Sx+2zROn7hyS34YuLOd1t78CW+gDS2QLQMsSojksX1XdlnNYBIgF0i1Cbcn5HMup3oNzPMEH1GXxU/ZPZJjxxUA=
  - secure: LVcpkCgAlt7+aaLN30vEuUWM59qoIzJv5vS/HnEWgR95bYA0Q4vsmgzje81G+GXGpQECUChV8uqVXxmJC8fPDFxbZ89NNXJFX8sZA+3sDF5QuITa9JiPWmcKb51fBLs9iZHQHntexB375AB7G/is9/1sqU05Ms+L4H5K5HI3/awZtifsL3RDTAxEylmhXbjPFBmXr0Gp//WeQ0PT53Wv9+izrS7sOS2t2+uklCUVDNs4P7Qo2prAr/XBYBHxa5y8mcK+xda7xSyJs9CtaxF3VAf+sEFQ3kKgNLvp2m3Bm6nT4fhUzoqn/4jjhkenwjksQttyBAoTanaHH932QpXACQcjgQJ4SbBNGjXjG9GMfTWdmmhLPsgIK2Vsaj7Gj+SkuhT9Bx+6PwihAd4zjOJ4OkVgoqDuyNAn2gMjODzDubps8lagszcmQXSXa5ZD/ePRO7f5H5aySOKb7KKbnF5IHCjs80AlzXcBEgG0urBuGPUX41Gnbc1bdbeUdHp0gb4ylKw4CznuHnurU1oHrhzXNupof58Wv6QpDeIjztLZCsaHrDMfxPebofKOTCXc93BQ5pEfqT0NYIT59HxUUQiSnJCKRW4fa3waBoVHQ4l3/MEAUgUVmTx4Go9uw20YKnFjtDkur2DkIgxkeXNVt0O0IvF6nADjrWvueWGo+kWloMw=
  - secure: XqUiEhriWOp4yFq3FgpPgoT2BmBAa2/fpCh1JYijfbZWFq5GE1ZecN0h7CJu4G87r6N7TxagQS1w4fhjCcs6GV0Nht3THq2qsmwZli6QhDdjrxOGwlPumBYi4OLpHdjSbdhNv6JBMZ/EyIO+XZXygJ38F7UHwX4zgeHEsypi516HNdTweSqt3CKgV/GeqZLq+2HNpkP+npN/KyAHx3DcJN38k1SXiAhczxjcq/cy/W5FkRQPYdzArsB3rIaHb3SIBRIGslNPhJVo1SiejbLWspds2PIg9JiRXQ235eObD4Ducl7aUN9xcIwGEF7c+4DQxO5ifsm3WeKJCv3w/vXpN9fgy71TdmzLsoKfFGSo3vDI9JpdJjJkL6EuQ9U0OB/MQTN1naesd66UXmucHmniriQXwK4SbuN2FS8HriJqltvMRaKkQoGAq7r6Tj2elufYGL1x/KXWQnIWaPkidGuK6dDKL8r3om9Xa8/k0aRoyyb6cE5nz44aECQLMKxv1vXvGrP/UGCLLcFLg7Ztur7FDE7158HqAuLGITn+zXArYH5CqtYXApD2mGrBfLCdBzljZX82Nxno/XpY3KwvuBBt0vbrsb17gia2IgiDyJPYaSn5ia+LPREfRsxKkzRdJH0bXhwReVLkCNS38MnfRVIyT/npAOoE7z1jUxhQhzM7bKw=
sudo: true
services:
- docker
jobs:
  include:
  - stage: Building image with p1pay.api.protocol.one
    script:
    - export TAG=`if [[ $TRAVIS_BRANCH == "master" ]]; then echo "latest"; else echo
      $TRAVIS_TAG; fi`
    - echo "$DOCKER_PASSWORD" | docker login --username "$DOCKER_USERNAME" --password-stdin
    - docker build -t $REPO:$TAG -t $REPO:0.0.$TRAVIS_BUILD_NUMBER .
    - docker push $REPO
after_success:
- curl -X POST $JURL/job/deploy-p1api/build --user $JENKINS_LOGIN:$TOKEN --data-urlencode
  json='\{"parameter":\ [\{"name":"CHART_NAME", "value":"p1payapi"\}\]\}'
notifications:
  email: false
  slack:
    secure: TNjvJwLocb9aJHFv+KECW/09dTTqRl4jE2p+MKDnr2uf+CqfDAjsanx2eEPjw9rUeSPfJUQ1ZUVTyv+nQKslMippgCpz9Wo9+PPw/gaNoY5niVpNPRE2TmjKyZoDx8xYYfXi+gwUWWOz6hHCv6Vb1edBmDvsoXXSuNuUxYLsUjN9mDFDutrFNC29K9iDfTHr9yBgVmjffOdph0dtybpr6aunBXnvVhBIX/XNNf697Yu6DkJAOfSPcCbREXmR/J5BGwNAgEA/jBH5XjLdYFyuJGHuDAAgOv0OPPC6Laly4cb+6yb7cqjD8iN1RnQm5k1hFBFYZA7lWjy9bHcf24pzGg2dHSvSEuFGpvV6EKx2wv7rWSPpQM5tug0nDTGJJAU23iKWsXK7cmjb11m3acrKyUj84ckmmBrRD9urUGOISphOYynclg2em7jRh64lf4aLoO8ErFm2VlD+KCN1qTBblIHPm6h2aUaT0WPlekYXssh177xfroLuO6QZIwj+4ipP9/but2vqA0jXyzk2jAl4fUrowDH0+VbWxpaYE0YYbt8VgyZpn/TbJv3C0Ni58/txOeKcUmoYOiZuJqOPWiIWpjixCrtru8lvck28EyIH3IQCqN5WZ8beBkC2HQKsZu+ktTATRYrghprqGmaAqbWr17JZ6mob/rXvNE4+PtPNow4=

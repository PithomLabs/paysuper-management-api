info:
  title: PaySuper payment solution service.
  version: "1.0.0"
  description: Swagger Specification for PaySuper Management API.
servers:
  - url: "https://api.pay.super.com"
    description: Production API
components:
  schemas:
    ResponseErrorMessage:
      type: object
      properties:
        code:
          description: "The error code."
          type: string
        message:
          description: "The error short description."
          type: string
        details:
          description: "The error details."
          type: string
    PriceGroup:
      type: object
      required:
      - id
      - currency
      properties:
        id:
          description: "The unique identifier for the price group."
          type: string
        currency:
          description: "Three-letter Currency Code ISO 4217, in uppercase."
          type: string
        region:
          description: "The region's name."
          type: string
        is_active:
          description: "Has a true value if the price group is active."
          type: boolean
    PriceGroupCurrenciesResponse:
      type: object
      properties:
        regions:
          type: array
          items:
            properties:
              currency:
                description: "The region's currency."
                type: string
              regions:
                type: array
                items:
                  properties:
                    region:
                      description: "The region's name."
                      type: string
                    country:
                      description: "The country's name."
                      type: array
                      items:
                        type: string
    RecommendedPriceResponse:
      type: object
      properties:
        recommended_price:
          type: array
          items:
            properties:
              region:
                description: "The region's name."
                type: string
              currency:
                description: "Three-letter currency code in ISO 4217, in uppercase."
                type: string
              amount:
                description: "The recommended currency conversion price."
                type: number
    ConfirmUserEmailRequest:
      type: object
      required:
      - token
      properties:
        token:
          description: "An encripted string to confirm the user registration."
          type: string
    FindByZipCodeResponse:
      type: object
      properties:
        count:
          description: "The number of cities."
          type: integer
        items:
          type: array
          items:
            properties:
              zip:
                description: "The postal code."
                type: string
              country:
                description: "The country's name."
                type: string
              city:
                description: "The city's name."
                type: string
              state:
                type: object
                properties:
                  code:
                    description: "The state's postal code."
                    type: string
                  name:
                    description: "The state's name."
                    type: string
              created_at:
                type: object
                properties:
                  seconds:
                    description: "9999-12-31T23:59:59Z inclusive."
                    type: integer
                  nanos:
                    description: "inclusive."
                    type: integer
    CountriesList:
      type: object
      properties:
        countries:
          type: array
          items:
            properties:
              iso_code_a2:
                description: "Two-letter country code in ISO 3166, in uppercase (for instance US)."
                type: string
              region:
                description: "A PaySuper system's relative geographical area for this country."
                type: string
              currency:
                description: "The currency of the country. Three-letter Currency Code ISO 4217, in uppercase."
                type: string
              payments_allowed:
                description: "Has a true value if a payment is allowed from this country."
                type: boolean
              change_allowed:
                description: "Has a true value if the customer can select another country in case of the payments are disallowed for this country."
                type: boolean
              vat_enabled:
                description: "Has a true value if VAT is calculated and paid for this country."
                type: boolean
              vat_currency:
                description: "VAT currency. It can differ from the country currency. Three-letter Currency Code ISO 4217, in uppercase."
                type: string
              price_group_id:
                description: "The unique identifier for the price group this country belongs to."
                type: string
              vat_threshold:
                type: object
                properties:
                  year:
                    description: "The maximum value of the PaySuper's revenue (since the beginning of the year) from this country which subjects to VAT."
                    type: number
                  world:
                    description: "The maximum value of the PaySuper's worldwide revenue (since the beginning of the year) which subjects to VAT."
                    type: number
              vat_period_month:
                description: "The length of the taxation period in months."
                type: integer
              vat_deadline_days:
                description: "The number of days after the taxation period end to pay VAT."
                type: integer
              vat_store_years:
                description: "The number of years to store the VAT payment history for this country."
                type: integer
              vat_currency_rates_policy:
                description: "The VAT calculation policy with a currency that differs from this country's VAT currency. Available values: on-day (the conversion rate on the day of payment), last-day (the conversion rate on the last day of a tax period), mid-month (the system reserved option of a conversion rate calculation. This option is disabled.)."
                type: string
              vat_currency_rates_source:
                description: "The source of currency rates to calculate the tax amount."
                type: string
              payer_tariff_region:
                description: "A PaySuper system's relative geographical area for this country. Available values: asia, europe, latin_america, russia_and_cis, worldwide."
                type: string
              high_risk_payments_allowed:
                description: "Has a true value if payments from this country are allowed. Has a false value for a high-risk merchant."
                type: boolean
              high_risk_change_allowed:
                description: "Has a true value if the customer can select another country while the payments are disallowed for a country determined by their IP address."
                type: boolean
    Country:
      type: object
      properties:
        iso_code_a2:
          description: "Two-letter country code in ISO 3166, in uppercase (for instance US)."
          type: string
        region:
          description: "A PaySuper system's relative geographical area for this country."
          type: string
        currency:
          description: "The currency of the country. Three-letter Currency Code ISO 4217, in uppercase."
          type: string
        payments_allowed:
          description: "Has a true value if a payment is allowed from this country."
          type: boolean
        change_allowed:
          description: "Has a true value if the customer can select another country in case of the payments are disallowed for this country."
          type: boolean
        vat_enabled:
          description: "Has a true value if VAT is calculated and paid for this country."
          type: boolean
        vat_currency:
          description: "VAT currency. It can differ from the country currency. Three-letter Currency Code ISO 4217, in uppercase."
          type: string
        price_group_id:
          description: "The unique identifier for the price group this country belongs to."
          type: string
        vat_threshold:
          type: object
          properties:
            year:
              description: "The maximum value of the PaySuper's revenue (since the beginning of the year) from this country which subjects to VAT."
              type: number
            world:
              description: "The maximum value of the PaySuper's worldwide revenue (since the beginning of the year) which subjects to VAT."
              type: number
        vat_period_month:
          description: "The length of the taxation period in months."
          type: integer
        vat_deadline_days:
          description: "The number of days after the taxation period end to pay VAT."
          type: integer
        vat_store_years:
          description: "The number of years to store the VAT payment history for this country."
          type: integer
        vat_currency_rates_policy:
          description: "The VAT calculation policy with a currency that differs from this country's VAT currency. Available values: on-day (the conversion rate on the day of payment), last-day (the conversion rate on the last day of a tax period), mid-month (the system reserved option of a conversion rate calculation. This option is disabled.)."
          type: string
        vat_currency_rates_source:
          description: "The source of currency rates to calculate the tax amount."
          type: string
        payer_tariff_region:
          description: "A PaySuper system's relative geographical area for this country. Available values: asia, europe, latin_america, russia_and_cis, worldwide."
          type: string
        high_risk_payments_allowed:
          description: "Has a true value if payments from this country are allowed. Has a false value for a high-risk merchant."
          type: boolean
        high_risk_change_allowed:
          description: "Has a true value if the customer can select another country while the payments are disallowed for a country determined by their IP address."
          type: boolean
    RecommendedPriceTableResponse:
      type: object
      properties:
        ranges:
          type: array
          items:
            properties:
              position:
                description: "The order number in a pricing table."
                type: integer
              from:
                description: "The lower boundary value of the range."
                type: number
              to:
                description: "The upper boundary value of the range."
                type: number
    TokenRequest:
      type: object
      properties:
        user:
          type: object
          required:
          - id
          properties:
            id:
              description: "The unique identifier for the customer in the merchant project."
              type: string
            email:
              type: object
              properties:
                value:
                  description: "The customer’s email address."
                  type: string
                verified:
                  description: "Whether the email has been verified on the merchant side."
                  type: boolean
            phone:
              type: object
              properties:
                value:
                  description: "The customer’s phone."
                  type: string
                verified:
                  description: "Whether the phone has been verified on the merchant side."
                  type: boolean
            name:
              type: object
              properties:
                value:
                  description: "The customer’s name."
                  type: string
            ip:
              type: object
              properties:
                value:
                  description: "The customer’s IP address."
                  type: string
            locale:
              type: object
              properties:
                value:
                  description: "The customer’s locale name. The Accept-Language format by RFC 7231."
                  type: string
            address:
              type: object
              properties:
                country:
                  description: "The customer's country. Two-letter country code in ISO 3166-1, in uppercase (for instance US)."
                  type: string
                city:
                  description: "The customer’s city."
                  type: string
                postal_code:
                  description: "The customer's postal code."
                  type: string
                state:
                  description: "The customer's state code in ISO 3166-2."
                  type: string
        settings:
          type: object
          required:
          - project_id
          - type
          properties:
            project_id:
              description: "The ID of the Project found in your merchant account in the PaySuper Dashboard."
              type: string
            return_url:
              type: object
              properties:
                success:
                  description: "The redirect URL for a successful payment."
                  type: string
                fail:
                  description: "The redirect URL for a failed payment."
                  type: string
            currency:
              description: "The order currency. Three-letter Currency Code ISO 4217, in uppercase. It's required for a simple checkout payment."
              type: string
            amount:
              description: "The order amount. It's required for a simple checkout payment."
              type: number
            description:
              description: "An arbitrary order description."
              type: string
            products_ids:
              description: "A list of unique identifiers for Project's products. It's required if a payment type equals to ‘product’ or ‘key’."
              type: array
              items:
                type: string
            platform_id:
              description: "The default platform's name for which the customer buys a key. This field is used only for the key type. Available values: steam, gog, uplay, origin, psn, xbox, nintendo, itch, egs."
              type: string
            type:
              description: "The order type. It depends on your sales option: Game Keys, Virtual Items, Virtual Currency, Simple Checkout. Available values: key, product, virtual_currency, simple."
              type: string
            is_buy_for_virtual_currency:
              description: "Has a true value if an order must be processed using a virtual currency."
              type: boolean
    TokenCreationResponse:
      type: object
      properties:
        token:
          description: "The secure string which contains encrypted information about your customer and sales option data."
          type: string
        payment_form_url:
          description: "The PaySuper-hosted URL of a payment form."
          type: string
paths:
  /api/v1/country:
    get:
      summary: Get the list of currencies
      operationId: countryGet
      description: "Get the full list of currencies using the country's name"
      tags:
      - Country
      parameters:
      - name: name
        description: "A name or two-letter country code by ISO 3166-1"
        in: query
        required: false
        schema:
          type: string
      responses:
        "200":
          description: Returns the list of currencies
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CountriesList"
        "400":
          description: Invalid request data
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseErrorMessage"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseErrorMessage"
  /api/v1/country/{code}:
    get:
      summary: Get the country data
      operationId: countryGetById
      description: "Get the country data by two-letter country code in ISO 3166-1"
      tags:
      - Country
      parameters:
      - name: code
        description: "Two-letter country code in ISO 3166-1"
        in: path
        required: true
        schema:
          type: string
      responses:
        "200":
          description: "Returns the country data (taxes, currency, region and others)"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Country"
        "400":
          description: Invalid request data
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseErrorMessage"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseErrorMessage"
  /api/v1/price_group/country:
    get:
      summary: Get the currency and region
      operationId: priceGroupCountryPathGetPriceGroupByCountry
      description: "Get the currency and region using the country's name"
      tags:
      - Price group
      parameters:
      - name: country
        description: "The country's name."
        in: query
        required: true
        schema:
          type: string
      responses:
        "200":
          description: "Returns the country's region and currency"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PriceGroup"
        "400":
          description: Invalid request data
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseErrorMessage"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseErrorMessage"
  /api/v1/price_group/currencies:
    get:
      summary: Get the list of currencies
      operationId: priceGroupCurrenciesPathGetCurrencyList
      description: "Get the full list of currencies with information about regions and countries using the country's name"
      tags:
      - Price group
      parameters:
      - name: country
        description: "The country's name."
        in: query
        required: true
        schema:
          type: string
      - name: zip
        description: The postal code. Required for US.
        in: query
        required: true
        schema:
          type: string
      - name: limit
        description: The number of objects returned in one page. Default value is 100.
        in: query
        required: false
        schema:
          type: string
      - name: offset
        description: The ranking number of the first item on the page.
        in: query
        required: false
        schema:
          type: string
      responses:
        "200":
          description: Returns a full list of currencies with information about regions and countries
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PriceGroupCurrenciesResponse"
        "400":
          description: Invalid request data
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseErrorMessage"
        "404":
          description: Not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseErrorMessage"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseErrorMessage"
  /api/v1/price_group/region:
    get:
      summary: Get the currency and the list of countries
      operationId: priceGroupRegionPathGetCurrencyByRegion
      description: Get the currency and the list of countries using the region
      tags:
      - Price group
      parameters:
      - name: region
        description: "The country region's name."
        in: query
        required: true
        schema:
          type: string
      responses:
        "200":
          description: Returns the currency and the list of countries
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PriceGroupCurrenciesResponse"
        "400":
          description: Invalid request data
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseErrorMessage"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseErrorMessage"
  /api/v1/pricing/recommended/conversion:
    get:
      summary: Get recommended currency conversion prices based on exchange rates
      operationId: pricingRecommendedConversionPathGetRecommendedByConversion
      description: Calculation of recommended currency conversion prices for regions based on the exchange rates
      tags:
      - Pricing
      parameters:
      - name: amount
        description: The amount of price.
        in: query
        required: true
        schema:
          type: string
      - name: currency
        description: "Three-letter currency code by ISO 4217, in uppercase."
        in: query
        required: true
        schema:
          type: string
      responses:
        "200":
          description: Returns the list of recommended currency conversion prices
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RecommendedPriceResponse"
        "400":
          description: Invalid request data
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseErrorMessage"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseErrorMessage"
  /api/v1/pricing/recommended/steam:
    get:
      summary: Get recommended currency conversion prices based on based on the Steam price ranges
      operationId: pricingRecommendedSteamPathGetRecommendedBySteam
      description: Calculation of recommended currency conversion prices based on the Steam price ranges taking the regional factors into account
      tags:
      - Pricing
      parameters:
      - name: amount
        description: The amount of price.
        in: query
        required: true
        schema:
          type: string
      - name: currency
        description: "Three-letter currency code by ISO 4217, in uppercase."
        in: query
        required: true
        schema:
          type: string
      responses:
        "200":
          description: Returns the list of recommended currency conversion prices
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RecommendedPriceResponse"
        "400":
          description: Invalid request data
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseErrorMessage"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseErrorMessage"
  /api/v1/pricing/recommended/table:
    get:
      summary: Get ranges of recommended currency conversion prices
      operationId: pricingRecommendedTablePathGetRecommendedTable
      description: Get the table of recommended currency conversion prices ranges
      tags:
      - Pricing
      parameters:
      - name: currency
        description: "Three-letter currency code by ISO 4217, in uppercase."
        in: query
        required: true
        schema:
          type: string
      responses:
        "200":
          description: Returns the table of recommended currency conversion prices ranges
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RecommendedPriceTableResponse"
        "400":
          description: Invalid request data
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseErrorMessage"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseErrorMessage"
  /api/v1/tokens:
    post:
      summary: Create a payment token
      operationId: tokenPathCreateToken
      description: "Create a payment token that encrypts details of your customer, the game and purchase parameters."
      tags:
      - Token
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TokenRequest"
      responses:
        "200":
          description: "Returns the payment token string and the PaySuper-hosted URL for a payment form"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TokenCreationResponse"
        "400":
          description: Invalid request data
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseErrorMessage"
        "404":
          description: Not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseErrorMessage"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseErrorMessage"
  /api/v1/user/confirm_email:
    put:
      summary: "Confirm the user's email"
      operationId: userProfileConfirmEmailPathConfirmEmail
      description: "Confirm the user's email using the user token"
      tags:
      - User Profile
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ConfirmUserEmailRequest"
      responses:
        "200":
          description: "Returns an empty response body if the user's email address has been successfully confirmed"
          content:
            text/plain:
              schema:
                type: string
        "400":
          description: Invalid request data
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseErrorMessage"
        "404":
          description: Not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseErrorMessage"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseErrorMessage"
  /api/v1/zip:
    get:
      summary: Search the city
      operationId: zipCodePathCheckZip
      description: Search the city using the country (and the ZIP code for US)
      tags:
      - Country
      parameters:
      - name: country
        description: "The country's name."
        in: query
        required: true
        schema:
          type: string
      - name: zip
        description: "The postal code. It's required for US."
        in: query
        required: false
        schema:
          type: string
      - name: limit
        description: The number of objects returned in one page. Default value is 100.
        in: query
        required: false
        schema:
          type: string
      - name: offset
        description: The ranking number of the first item on the page.
        in: query
        required: false
        schema:
          type: string
      responses:
        "200":
          description: "Returns the country data (region, city, and others)"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FindByZipCodeResponse"
        "400":
          description: Invalid request data
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseErrorMessage"
        "404":
          description: Not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseErrorMessage"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseErrorMessage"
openapi: "3.0.2"